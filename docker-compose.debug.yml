# Optional: Use this file for debugging
# Usage: docker compose -f docker-compose.yml -f docker-compose.debug.yml up

version: '3.8'

services:
  backend:
    ports:
      - "3001:3001"
      - "9229:9229"  # Node.js debug port
    command: sh -c "npm install && npx prisma generate && (npx prisma migrate deploy || npx prisma migrate dev --name init) && npx ts-node -r tsconfig-paths/register prisma/seed.ts && npm run start:debug"

  frontend:
    ports:
      - "3000:3000"
      - "9228:9228"  # Node.js debug port
    # Next.js debug mode (if needed)
    # command: sh -c "npm install && NODE_OPTIONS='--inspect' npm run dev"

